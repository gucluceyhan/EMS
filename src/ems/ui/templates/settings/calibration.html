{% extends "base.html" %}

{% block title %}Calibration - GES Solar EMS{% endblock %}

{% block page_subtitle %}Device Calibration{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-6 space-y-6">
  <h1 class="text-xl font-semibold">Settings – Device Calibration</h1>
  
  <div class="bg-white dark:bg-gray-950 border border-gray-200 dark:border-gray-800 rounded-xl p-4">
    <div class="flex items-center justify-between mb-3">
      <h2 class="font-semibold">Calibration Management</h2>
      <div class="space-x-2">
        <button id="btnNewCalibration" class="px-3 py-2 rounded-md border border-gray-200 dark:border-gray-700">New Calibration</button>
        <button id="btnImportCalibration" class="px-3 py-2 rounded-md border border-gray-200 dark:border-gray-700">Import Certificate</button>
      </div>
    </div>
    
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead class="bg-gray-800 text-white uppercase tracking-wide text-xs">
          <tr>
            <th class="px-3 py-2 text-left">Device</th>
            <th class="px-3 py-2 text-left">Type</th>
            <th class="px-3 py-2 text-left">Last Calibration</th>
            <th class="px-3 py-2 text-left">Next Due</th>
            <th class="px-3 py-2 text-left">Certificate</th>
            <th class="px-3 py-2 text-left">Status</th>
            <th class="px-3 py-2 text-left">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-gray-200 dark:border-gray-800">
            <td class="px-3 py-2 font-medium">sincan-meter-main</td>
            <td class="px-3 py-2">Energy Meter</td>
            <td class="px-3 py-2">2024-03-15</td>
            <td class="px-3 py-2">2026-03-15</td>
            <td class="px-3 py-2">CAL-2024-0315-001</td>
            <td class="px-3 py-2"><span class="inline-flex px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-800">Valid</span></td>
            <td class="px-3 py-2">
              <button class="px-2 py-1 text-xs rounded-md border border-gray-200 dark:border-gray-700">View Cert</button>
              <button class="px-2 py-1 text-xs rounded-md ml-1 bg-blue-600 text-white">Calibrate</button>
            </td>
          </tr>
          <tr class="border-b border-gray-200 dark:border-gray-800">
            <td class="px-3 py-2 font-medium">teknokent-weather</td>
            <td class="px-3 py-2">Weather Station</td>
            <td class="px-3 py-2">2023-11-20</td>
            <td class="px-3 py-2">2025-11-20</td>
            <td class="px-3 py-2">CAL-2023-1120-002</td>
            <td class="px-3 py-2"><span class="inline-flex px-2 py-0.5 rounded-full text-xs bg-yellow-100 text-yellow-800">Expires Soon</span></td>
            <td class="px-3 py-2">
              <button class="px-2 py-1 text-xs rounded-md border border-gray-200 dark:border-gray-700">View Cert</button>
              <button class="px-2 py-1 text-xs rounded-md ml-1 bg-yellow-600 text-white">Schedule</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Calibration Standards -->
  <div class="bg-white dark:bg-gray-950 border border-gray-200 dark:border-gray-800 rounded-xl p-4">
    <h2 class="font-semibold mb-3">Calibration Standards</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="border border-gray-200 dark:border-gray-800 rounded-md p-4">
        <h4 class="font-medium mb-2">Energy Meters</h4>
        <div class="space-y-2 text-sm">
          <div>Standard: IEC 62053-22</div>
          <div>Accuracy Class: 0.2S</div>
          <div>Calibration Period: 2 years</div>
          <div>Reference Standard: Fluke 6105A</div>
        </div>
      </div>
      
      <div class="border border-gray-200 dark:border-gray-800 rounded-md p-4">
        <h4 class="font-medium mb-2">Weather Sensors</h4>
        <div class="space-y-2 text-sm">
          <div>Standard: ISO 9060</div>
          <div>Irradiance Accuracy: ±2%</div>
          <div>Calibration Period: 2 years</div>
          <div>Reference: Kipp&Zonen CMP22</div>
        </div>
      </div>
      
      <div class="border border-gray-200 dark:border-gray-800 rounded-md p-4">
        <h4 class="font-medium mb-2">Temperature Sensors</h4>
        <div class="space-y-2 text-sm">
          <div>Standard: IEC 60751</div>
          <div>Accuracy: ±0.3°C</div>
          <div>Calibration Period: 1 year</div>
          <div>Reference: Fluke 1524</div>
        </div>
      </div>
    </div>
  </div>

  <div class="flex items-center gap-2">
    <button id="btnSaveCalibration" class="px-3 py-2 rounded-md bg-brand-600 text-white">Save Calibration Settings</button>
    <button id="btnResetCalibration" class="px-3 py-2 rounded-md border border-gray-200 dark:border-gray-700">Reset</button>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Calibration specific JavaScript
  document.addEventListener('DOMContentLoaded', () => {
    // Initialize calibration UI
  });
</script>
{% endblock %}